# [ììŠ¤ì¸ 5ì£¼ì°¨] ì‹ ë™í˜

[ğŸ“š ê³µë¶€ ì •ë¦¬ ](#-ê³µë¶€-ì •ë¦¬)
[ğŸ§ ì§ˆë¬¸ ](#-ì§ˆë¬¸)

---

# ğŸ“š ê³µë¶€ ì •ë¦¬

## 10. ì—ëŸ¬ í•¸ë“¤ë§

### 10.1 'try..catch'ì™€ ì—ëŸ¬ í•¸ë“¤ë§

> `try..catch` : ìŠ¤í¬ë¦½íŠ¸ê°€ ì£½ëŠ”ê±¸ ë°©ì§€í•˜ê³  ì—ëŸ¬ë¥¼ ì¡ì•„ ì—ëŸ¬ë¬¸ì„ ì‹¤í–‰í•¨.

```js
try {
  alert("try ë¸”ë¡ ì‹œì‘");

  // ...ì—ëŸ¬ê°€ ì—†ìŠµë‹ˆë‹¤. ì—ëŸ¬ ë°œìƒì‹œ ìºì¹˜ë¡œ ë„˜ì–´ê°

  alert("try ë¸”ë¡ ë");
} catch (err) {
  alert(`ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤!`); // (3)
}
```

- ì˜¤ì§ ëŸ°íƒ€ì„ ì—ëŸ¬ë§Œ ë™ì‘í•¨.
- ë™ê¸°ì ìœ¼ë¡œ ë™ì‘í•¨.

> `throw` ì—°ì‚°ì : throw ì—°ì‚°ìëŠ” ì—ëŸ¬ë¥¼ ìƒì„±í•œë‹¤.
> throw <error object> ìƒì„±ìë¥¼ í†µí•œ ì—ëŸ¬ ìƒì„±

```js
let error = new Error(message);
// or
let error = new SyntaxError(message);
let error = new ReferenceError(message);
```

> `finally` : try..catchë¥¼ ë‹¤ìŒê³¼ ê°™ì´ í™•ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```js
try {
   ... ì½”ë“œë¥¼ ì‹¤í–‰ ...
} catch(e) {
   ... ì—ëŸ¬ í•¸ë“¤ë§ ...
} finally {
   ... í•­ìƒ ì‹¤í–‰ ...
}
```

### 10.2 ì»¤ìŠ¤í…€ ì—ëŸ¬ì™€ ì—ëŸ¬ í™•ì¥

#### ì»¤ìŠ¤í…€ ì—ëŸ¬ í´ë˜ìŠ¤

- ê°œë°œì„ ì§„í–‰í•˜ë‹¤ ë³´ë©´ ë‹¤ì–‘í•œ ìƒí™©ì—ì„œ ì»¤ìŠ¤í…€ ì—ëŸ¬ í´ë˜ìŠ¤ë¥¼ ì •ì˜í•˜ëŠ” ê²ƒì´ ìœ ìš©í•˜ë‹¤. ì˜ˆë¥¼ ë“¤ì–´, `HttpError`, `DbError`, `NotFoundError` ë“±ì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
- ì»¤ìŠ¤í…€ ì—ëŸ¬ í´ë˜ìŠ¤ëŠ” `Error` í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì•„ ë§Œë“œëŠ” ê²ƒì´ ì¢‹ë‹¤. ì´ë ‡ê²Œ í•˜ë©´ `instanceof`ë¥¼ ì‚¬ìš©í•´ ì—ëŸ¬ ê°ì²´ë¥¼ ì‹ë³„í•  ìˆ˜ ìˆëŠ” ì¥ì ì´ ìˆë‹¤.

#### ì—ëŸ¬ í™•ì¥

- ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì»¤ì§ˆìˆ˜ë¡ ì—ëŸ¬ í´ë˜ìŠ¤ë“¤ì€ ê³„ì¸µ êµ¬ì¡°ë¥¼ í˜•ì„±í•˜ê²Œ ëœë‹¤. ì˜ˆë¥¼ ë“¤ì–´, `HttpTimeoutError`ëŠ” `HttpError`ë¥¼ ìƒì†ë°›ì•„ ìƒì„±í•  ìˆ˜ ìˆë‹¤.
- `ValidationError`ë¥¼ ìƒì†ë°›ì•„ í•„ìˆ˜ í”„ë¡œí¼í‹°ê°€ ëˆ„ë½ëœ ê²½ìš°ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” `PropertyRequiredError`ë¥¼ ì •ì˜í•  ìˆ˜ ìˆë‹¤.

#### ì—ëŸ¬ ì²˜ë¦¬ ë°©ë²•

- `try..catch` ë¬¸ì—ì„œ ì»¤ìŠ¤í…€ ì—ëŸ¬ì™€ ë‚´ì¥ ì—ëŸ¬ë¥¼ ëª¨ë‘ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.
- `instanceof`ë¥¼ ì‚¬ìš©í•´ ì—ëŸ¬ ìœ í˜•ì„ í™•ì¸í•˜ê³ , í•„ìš”ì— ë”°ë¼ ì—ëŸ¬ë¥¼ ë‹¤ì‹œ ë˜ì§ˆ ìˆ˜ ìˆë‹¤.

#### ì˜ˆì™¸ ê°ì‹¸ê¸° (Wrapping Exception)

- `ReadError`ì™€ ê°™ì€ í¬ê´„ì ì¸ ì—ëŸ¬ í´ë˜ìŠ¤ë¥¼ ì •ì˜í•˜ê³ , íŠ¹ì • ì—ëŸ¬ (`ValidationError`, `SyntaxError`)ë¥¼ ì´ í´ë˜ìŠ¤ì— ê°ì‹¸ì„œ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì´ë‹¤.
- `ReadError`ì˜ `cause` í”„ë¡œí¼í‹°ì— ì›ë˜ì˜ ì—ëŸ¬ ì •ë³´ë¥¼ ì €ì¥í•˜ì—¬ ì„¸ë¶€ ì •ë³´ë¥¼ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.
- ì˜ˆì™¸ ê°ì‹¸ê¸°ë¥¼ ì‚¬ìš©í•˜ë©´, ì™¸ë¶€ ì½”ë“œì—ì„œëŠ” í•˜ë‚˜ì˜ ì—ëŸ¬ ìœ í˜•ë§Œ í™•ì¸í•˜ë©´ ë˜ë¯€ë¡œ, ì½”ë“œê°€ ë” ë‹¨ìˆœí•´ì§„ë‹¤.

#### í•µì‹¬ ì •ë¦¬

- ì»¤ìŠ¤í…€ ì—ëŸ¬ í´ë˜ìŠ¤ëŠ” `Error`ë¥¼ ìƒì†ë°›ì•„ ë§Œë“¤ê³ , `super`ë¥¼ í˜¸ì¶œí•´ì•¼ í•œë‹¤.
- `instanceof`ë¥¼ ì‚¬ìš©í•´ ì—ëŸ¬ ìœ í˜•ì„ íŒë³„í•  ìˆ˜ ìˆìœ¼ë©°, ìƒì†ëœ í´ë˜ìŠ¤ì—ì„œë„ ë™ì¼í•˜ê²Œ ë™ì‘í•œë‹¤.
- ì˜ˆì™¸ ê°ì‹¸ê¸°ëŠ” ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì—ì„œ ë„ë¦¬ ì‚¬ìš©ë˜ëŠ” íŒ¨í„´ìœ¼ë¡œ, ë‹¤ì–‘í•œ ì—ëŸ¬ë¥¼ í•˜ë‚˜ì˜ ì¶”ìƒí™”ëœ ì—ëŸ¬ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ í•œë‹¤.

## 11. í”„ë¼ë¯¸ìŠ¤ì™€ async, await

### 11.1 ì½œë°±

> ì½œë°±í•¨ìˆ˜ : ë‚˜ì¤‘ì— í˜¸ì¶œí•  í•¨ìˆ˜ë¥¼ ì˜ë¯¸

```js
function loadScript(src, callback) {
  let script = document.createElement("script");
  script.src = src;
  script.onload = () => callback(script);
  document.head.append(script);
}

loadScript(
  "https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.2.0/lodash.js",
  (script) => {
    alert(`${script.src}ê°€ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.`);
    alert(_); // ìŠ¤í¬ë¦½íŠ¸ì— ì •ì˜ëœ í•¨ìˆ˜
  }
);
```

> ì¤‘ì²© ì½œë°± : ì½œë°±ì†ì— ì½œë°±ì´ ìˆëŠ”ê²ƒ í•œë‘ê°œëŠ” ê´œì°®ì•„ë„ ë§ì•„ì§€ë©´ ì•ˆëœë‹¤

- ë©¸ë§ì˜ í”¼ë¼ë¯¸ë“œ : ì§€ì–‘í•¨

```js
loadScript("1.js", function (error, script) {
  if (error) {
    handleError(error);
  } else {
    // ...
    loadScript("2.js", function (error, script) {
      if (error) {
        handleError(error);
      } else {
        // ...
        loadScript("3.js", function (error, script) {
          if (error) {
            handleError(error);
          } else {
            // ëª¨ë“  ìŠ¤í¬ë¦½íŠ¸ê°€ ë¡œë”©ëœ í›„, ì‹¤í–‰ íë¦„ì´ ì´ì–´ì§‘ë‹ˆë‹¤. (*)
          }
        });
      }
    });
  }
});
```

- ì´ë ‡ê²Œ í•˜ì„¸ìš”

```js
loadScript("1.js", step1);

function step1(error, script) {
  if (error) {
    handleError(error);
  } else {
    // ...
    loadScript("2.js", step2);
  }
}

function step2(error, script) {
  if (error) {
    handleError(error);
  } else {
    // ...
    loadScript("3.js", step3);
  }
}

function step3(error, script) {
  if (error) {
    handleError(error);
  } else {
    // ëª¨ë“  ìŠ¤í¬ë¦½íŠ¸ê°€ ë¡œë”©ë˜ë©´ ë‹¤ë¥¸ ë™ì‘ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. (*)
  }
}
```

### 11.2 í”„ë¼ë¯¸ìŠ¤

> í”„ë¡œë¯¸ìŠ¤ : ë¹„ë™ê¸° ì‘ì—…ì˜ ì™„ë£Œ ë˜ëŠ” ì‹¤íŒ¨ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê°ì²´ë‹¤. í”„ë¡œë¯¸ìŠ¤ëŠ” ë¹„ë™ê¸° ì‘ì—…ì´ ì„±ê³µí–ˆì„ ë•Œì˜ ê²°ê³¼ë‚˜ ì‹¤íŒ¨í–ˆì„ ë•Œì˜ ì´ìœ ë¥¼ ìº¡ì²˜í•  ìˆ˜ ìˆë‹¤.
> ![image](https://github.com/user-attachments/assets/38f3cbad-1884-46dc-9381-6be735af2128)

í”„ë¡œë¯¸ìŠ¤ëŠ” ì£¼ë¡œ ë‹¤ìŒì˜ ì„¸ ê°€ì§€ ìƒíƒœë¥¼ ê°€ì§„ë‹¤:

- ëŒ€ê¸° ì¤‘(pending): ì´ˆê¸° ìƒíƒœë¡œ, ë¹„ë™ê¸° ì‘ì—…ì´ ì•„ì§ ì™„ë£Œë˜ì§€ ì•Šì•˜ë‹¤.
- ì´í–‰ë¨(fulfilled): ë¹„ë™ê¸° ì‘ì—…ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì–´ ê²°ê³¼ ê°’ì„ ë°˜í™˜í•œ ìƒíƒœì´ë‹¤.
- ê±°ë¶€ë¨(rejected): ë¹„ë™ê¸° ì‘ì—…ì´ ì‹¤íŒ¨í•œ ìƒíƒœë¡œ, ì‹¤íŒ¨ ì´ìœ ë¥¼ ë°˜í™˜í•œ ìƒíƒœì´ë‹¤.

#### ì†Œë¹„ì : then, catch, finally

```js
promise
  .then(function (result) {
    console.log(result); // ì‘ì—… ì„±ê³µ ì‹œ ì‹¤í–‰
  })
  .catch(function (error) {
    console.log(error); // ì‘ì—… ì‹¤íŒ¨ ì‹œ ì‹¤í–‰
  })
  .finally(function () {
    console.log("ì‘ì—… ì™„ë£Œ"); // ì‘ì—…ì´ ì™„ë£Œë˜ë©´ í•­ìƒ ì‹¤í–‰
  });
```

### 11.3 í”„ë¼ë¯¸ìŠ¤ ì²´ì´ë‹

```js
new Promise(function (resolve, reject) {
  setTimeout(() => resolve(1), 1000); // (*)
})
  .then(function (result) {
    // (**)

    alert(result); // 1
    return result * 2;
  })
  .then(function (result) {
    // (***)

    alert(result); // 2
    return result * 2;
  })
  .then(function (result) {
    alert(result); // 4
    return result * 2;
  });
```

ì´ë ‡ê²Œ í”„ë¡œë¯¸ìŠ¤ë¥¼ ê³„ì†í•´ì„œ ì²´ì¸ì²˜ëŸ¼ ì—°ê²°í•œ ê²ƒ.
![image](https://github.com/user-attachments/assets/7281e89a-5886-45d5-a931-d7fe3180ceb0)

- í”„ë¼ë¯¸ìŠ¤ ì²´ì´ë‹ì´ ê°€ëŠ¥í•œ ì´ìœ ëŠ” promise.thenì„ í˜¸ì¶œí•˜ë©´ í”„ë¼ë¯¸ìŠ¤ê°€ ë°˜í™˜ë˜ê¸° ë•Œë¬¸ì´ë‹¤.
- ì´ˆë³´ìëŠ” **í”„ë¼ë¯¸ìŠ¤ í•˜ë‚˜**ì— .thenì„ ì—¬ëŸ¬ ê°œ ì¶”ê°€í•œ í›„, ì´ë¥¼ ì²´ì´ë‹ì´ë¼ê³  ì°©ê°í•˜ëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤.

**ìš”ì•½**
.then ë˜ëŠ” .catch, .finallyì˜ í•¸ë“¤ëŸ¬(ì–´ë–¤ ê²½ìš°ë„ ìƒê´€ì—†ìŒ)ê°€ í”„ë¼ë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•˜ë©´, ë‚˜ë¨¸ì§€ ì²´ì¸ì€ í”„ë¼ë¯¸ìŠ¤ê°€ ì²˜ë¦¬ë  ë•Œê¹Œì§€ ëŒ€ê¸°í•©ë‹ˆë‹¤. ì²˜ë¦¬ê°€ ì™„ë£Œë˜ë©´ í”„ë¼ë¯¸ìŠ¤ì˜ result(ê°’ ë˜ëŠ” ì—ëŸ¬)ê°€ ë‹¤ìŒ ì²´ì¸ìœ¼ë¡œ ì „ë‹¬ëœë‹¤.

### 11.4 í”„ë¼ë¯¸ìŠ¤ì™€ ì—ëŸ¬ í•¸ë“¤ë§

## í”„ë¼ë¯¸ìŠ¤ì™€ ì—ëŸ¬ í•¸ë“¤ë§

í”„ë¼ë¯¸ìŠ¤ê°€ ê±°ë¶€ë˜ë©´ ì œì–´ íë¦„ì´ ê°€ì¥ ê°€ê¹Œìš´ ê±°ë¶€ í•¸ë“¤ëŸ¬ë¡œ ë„˜ì–´ê°€ê²Œ ëœë‹¤. ì´ë¥¼ í†µí•´ í”„ë¼ë¯¸ìŠ¤ ì²´ì¸ì„ ì‚¬ìš©í•˜ì—¬ ì—ëŸ¬ë¥¼ ì‰½ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤. ì´ëŠ” ì‹¤ë¬´ì—ì„œ ë§¤ìš° ìœ ìš©í•œ ê¸°ëŠ¥ì´ë‹¤.

**ì—ëŸ¬ ì²˜ë¦¬**

ì—ëŸ¬ë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê¸° ìœ„í•´, í”„ë¼ë¯¸ìŠ¤ ì²´ì¸ì˜ ëì— `.catch`ë¥¼ ë¶™ì¼ ìˆ˜ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´:

```js
fetch("https://no-such-server.blabla") // ì‹¤íŒ¨
  .then((response) => response.json())
  .catch((err) => alert(err)); // TypeError: failed to fetch
```

ì´ ê²½ìš°, `fetch`ê°€ ì‹¤íŒ¨í•˜ë©´ `.catch` ë©”ì„œë“œê°€ ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•œë‹¤. `.catch`ëŠ” ë°˜ë“œì‹œ ì²« ë²ˆì§¸ í•¸ë“¤ëŸ¬ì¼ í•„ìš”ëŠ” ì—†ìœ¼ë©°, í•˜ë‚˜ ë˜ëŠ” ì—¬ëŸ¬ ê°œì˜ `.then` ë’¤ì— ì˜¬ ìˆ˜ ìˆë‹¤.

**ì•”ì‹œì  tryâ€¦catch**

í”„ë¼ë¯¸ìŠ¤ëŠ” ì•”ì‹œì  `tryâ€¦catch`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•œë‹¤. í”„ë¼ë¯¸ìŠ¤ ìƒì„±ìì™€ í•¸ë“¤ëŸ¬ ë‚´ë¶€ì—ì„œ ì˜ˆì™¸ê°€ ë°œìƒí•˜ë©´, ì•”ì‹œì  `tryâ€¦catch`ê°€ ì´ë¥¼ ì¡ì•„ì„œ ê±°ë¶€ ìƒíƒœë¡œ ë³€ê²½í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´:

```js
new Promise((resolve, reject) => {
  throw new Error("ì—ëŸ¬ ë°œìƒ!");
}).catch(alert); // Error: ì—ëŸ¬ ë°œìƒ!
```

ì´ ì˜ˆì‹œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì½”ë“œì™€ ë™ì¼í•˜ê²Œ ë™ì‘í•œë‹¤:

```js
new Promise((resolve, reject) => {
  reject(new Error("ì—ëŸ¬ ë°œìƒ!"));
}).catch(alert); // Error: ì—ëŸ¬ ë°œìƒ!
```

**ë‹¤ì‹œ ë˜ì§€ê¸°**

ì²´ì¸ ë§ˆì§€ë§‰ì˜ `.catch`ëŠ” `tryâ€¦catch`ì™€ ìœ ì‚¬í•œ ì—­í• ì„ í•˜ë©°, `.then` í•¸ë“¤ëŸ¬ì—ì„œ ë°œìƒí•œ ëª¨ë“  ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤. `.catch` ë¸”ë¡ ë‚´ì—ì„œ ì—ëŸ¬ë¥¼ ë‹¤ì‹œ ë˜ì§€ë©´ ì œì–´ íë¦„ì€ ë‹¤ìŒ `.catch`ë¡œ ë„˜ì–´ê°„ë‹¤. ì˜ˆë¥¼ ë“¤ì–´:

```js
new Promise((resolve, reject) => {
  throw new Error("ì—ëŸ¬ ë°œìƒ!");
})
  .catch(function (error) {
    alert("ì—ëŸ¬ê°€ ì˜ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤. ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ì´ ì´ì–´ì§‘ë‹ˆë‹¤.");
  })
  .then(() => alert("ë‹¤ìŒ í•¸ë“¤ëŸ¬ê°€ ì‹¤í–‰ë©ë‹ˆë‹¤."));
```

ì—¬ê¸°ì„œ `.catch`ê°€ ì •ìƒì ìœ¼ë¡œ ì²˜ë¦¬ë˜ë©´ ë‹¤ìŒ `.then` í•¸ë“¤ëŸ¬ê°€ ì‹¤í–‰ëœë‹¤.

**ì²˜ë¦¬ë˜ì§€ ëª»í•œ ê±°ë¶€**

ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•˜ì§€ ëª»í•˜ë©´, ì—ëŸ¬ëŠ” â€˜ê°‡í˜€ë²„ë¦¬ê²Œâ€™ ëœë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì²´ì¸ ëì— `.catch`ê°€ ì—†ìœ¼ë©´ ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤:

```js
new Promise(function () {
  noSuchFunction(); // ì¡´ì¬í•˜ì§€ ì•ŠëŠ” í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê¸° ë•Œë¬¸ì— ì—ëŸ¬ ë°œìƒ
}).then(() => {
  // ì„±ê³µ ìƒíƒœì˜ í•¸ë“¤ëŸ¬
}); // ëì— .catchê°€ ì—†ìŒ!
```

ì´ ê²½ìš°, ì—ëŸ¬ê°€ ì²˜ë¦¬ë˜ì§€ ì•Šìœ¼ë©´ ì „ì—­ ì—ëŸ¬ê°€ ë°œìƒí•˜ë©°, ë¸Œë¼ìš°ì €ì—ì„œëŠ” `unhandledrejection` ì´ë²¤íŠ¸ë¥¼ í†µí•´ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤:

```js
window.addEventListener("unhandledrejection", function (event) {
  alert(event.promise); // ì—ëŸ¬ë¥¼ ìƒì„±í•œ í”„ë¼ë¯¸ìŠ¤
  alert(event.reason); // ì²˜ë¦¬ë˜ì§€ ì•Šì€ ì—ëŸ¬ ê°ì²´
});
```

### 11.5 í”„ë¼ë¯¸ìŠ¤ API

- Promise.all(promises): ëª¨ë“  í”„ë¼ë¯¸ìŠ¤ê°€ ì´í–‰ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ê³ , ì´í–‰ëœ ê²°ê³¼ì˜ ë°°ì—´ì„ ë°˜í™˜í•œë‹¤. í•˜ë‚˜ë¼ë„ ê±°ë¶€ë˜ë©´ ì „ì²´ê°€ ê±°ë¶€ëœë‹¤.
- Promise.allSettled(promises): ëª¨ë“  í”„ë¼ë¯¸ìŠ¤ê°€ ì²˜ë¦¬ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ê³ , ê° í”„ë¼ë¯¸ìŠ¤ì˜ ê²°ê³¼ë¥¼ {status, value or reason} í˜•íƒœë¡œ ë°˜í™˜í•œë‹¤.
- Promise.race(promises): ê°€ì¥ ë¨¼ì € ì²˜ë¦¬ëœ í”„ë¼ë¯¸ìŠ¤ì˜ ê²°ê³¼ë‚˜ ì—ëŸ¬ë¥¼ ë°˜í™˜í•œë‹¤.
- Promise.resolve(value): ì£¼ì–´ì§„ ê°’ì„ ì´í–‰ ìƒíƒœì˜ í”„ë¼ë¯¸ìŠ¤ë¡œ ë°˜í™˜í•œë‹¤.
- Promise.reject(error): ì£¼ì–´ì§„ ì—ëŸ¬ë¥¼ ê±°ë¶€ ìƒíƒœì˜ í”„ë¼ë¯¸ìŠ¤ë¡œ ë°˜í™˜í•œë‹¤.

### 11.6 í”„ë¼ë¯¸ìŠ¤í™”

## í”„ë¼ë¯¸ìŠ¤í™”

í”„ë¼ë¯¸ìŠ¤í™”ë€ ì½œë°±ì„ ë°›ëŠ” í•¨ìˆ˜ë¥¼ í”„ë¼ë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë¡œ ë°”ê¾¸ëŠ” ê³¼ì •ì„ ì˜ë¯¸í•œë‹¤. ì´ëŠ” 'í”„ë¼ë¯¸ìŠ¤í™”(promisification)'ë¼ê³  í•œë‹¤.

í”„ë¼ë¯¸ìŠ¤ëŠ” ì½œë°±ë³´ë‹¤ ë” í¸ë¦¬í•  ë•Œê°€ ë§ê¸° ë•Œë¬¸ì—, ì½œë°± ê¸°ë°˜ í•¨ìˆ˜ì™€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í”„ë¼ë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë¡œ ë³€í™˜í•˜ëŠ” ê²ƒì´ ìœ ë¦¬í•˜ë‹¤.

**ì½œë°± ì˜ˆì‹œ**

ì½œë°±ì„ ì‚¬ìš©í•˜ëŠ” `loadScript(src, callback)` í•¨ìˆ˜ì˜ ì˜ˆë¥¼ ë³´ì:

```js
function loadScript(src, callback) {
  let script = document.createElement("script");
  script.src = src;

  script.onload = () => callback(null, script);
  script.onerror = () =>
    callback(new Error(`${src}ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë„ì¤‘ì— ì—ëŸ¬ê°€ ë°œìƒí•¨`));

  document.head.append(script);
}

// ì‚¬ìš©ë²•:
// loadScript('path/script.js', (err, script) => {...})
```

ì´ì œ `loadScript(src, callback)` í•¨ìˆ˜ë¥¼ í”„ë¼ë¯¸ìŠ¤í™”í•˜ì—¬ `loadScriptPromise(src)`ë¥¼ ë§Œë“¤ì–´ë³´ì. ì´ í•¨ìˆ˜ëŠ” `loadScript`ì™€ ë™ì¼í•˜ê²Œ ë™ì‘í•˜ì§€ë§Œ, `callback` ëŒ€ì‹  `src`ë§Œ ì¸ìˆ˜ë¡œ ë°›ê³  í”„ë¼ë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•´ì•¼ í•œë‹¤.

```js
let loadScriptPromise = function (src) {
  return new Promise((resolve, reject) => {
    loadScript(src, (err, script) => {
      if (err) reject(err);
      else resolve(script);
    });
  });
};

// ì‚¬ìš©ë²•:
// loadScriptPromise('path/script.js').then(...)
```

ìƒˆë¡­ê²Œ êµ¬í˜„í•œ `loadScriptPromise`ëŠ” í”„ë¼ë¯¸ìŠ¤ ê¸°ë°˜ ì½”ë“œì™€ ì˜ í†µí•©ëœë‹¤. ì´ í•¨ìˆ˜ëŠ” ê¸°ì¡´ í•¨ìˆ˜ `loadScript`ì— ëª¨ë“  ì‘ì—…ì„ ìœ„ì„í•˜ë©°, `loadScript`ì˜ ì½œë°±ì€ ìŠ¤í¬ë¦½íŠ¸ ë¡œë”© ìƒíƒœì— ë”°ë¼ ì´í–‰ ë˜ëŠ” ê±°ë¶€ ìƒíƒœì˜ í”„ë¼ë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•œë‹¤.

**í—¬í¼ í•¨ìˆ˜**

ì‹¤ë¬´ì—ì„œëŠ” ì—¬ëŸ¬ ê°œì˜ í•¨ìˆ˜ë¥¼ í”„ë¼ë¯¸ìŠ¤í™” í•´ì•¼ í•  ë•Œê°€ ìˆë‹¤. ì´ëŸ´ ë•ŒëŠ” í—¬í¼ í•¨ìˆ˜ë¥¼ ë§Œë“œëŠ” ê²ƒì´ ì¢‹ë‹¤. í•¨ìˆ˜ `f`ë¥¼ í”„ë¼ë¯¸ìŠ¤í™”í•˜ê³  ë˜í¼ í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ `promisify(f)`ë¥¼ ì‘ì„±í•˜ì.

```js
function promisify(f) {
  return function (...args) { // ë˜í¼ í•¨ìˆ˜ë¥¼ ë°˜í™˜í•¨
    return new Promise((resolve, reject) => {
      function callback(err, result) { // fì— ì‚¬ìš©í•  ì»¤ìŠ¤í…€ ì½œë°±
        if (err) {
          reject(err);
        } else {
          resolve(result);
 }
      }

      args.push(callback); // ì»¤ìŠ¤í…€ ì½œë°±ì„ í•¨ìˆ˜ fì˜ ì¸ìˆ˜ ëì— ì¶”ê°€

      f.call(this, ...args); // ê¸°ì¡´ í•¨ìˆ˜ë¥¼ í˜¸ì¶œ
    });
  };
};

// ì‚¬ìš©ë²•:
let loadScriptPromise = promisify(loadScript);
loadScriptPromise(...).then(...);
```

ìœ„ ì˜ˆì‹œëŠ” í”„ë¼ë¯¸ìŠ¤í™”í•  í•¨ìˆ˜ê°€ ë‘ ê°œì˜ ì¸ìˆ˜ `(err, result)`ë¥¼ ë°›ëŠ” ì½œë°±ì„ ê°€ì§„ë‹¤ê³  ê°€ì •í•˜ê³  ì‘ì„±ë˜ì—ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ì´ëŸ¬í•œ ìƒí™©ì´ ë§ìœ¼ë©°, `promisify`ëŠ” ì˜ ë™ì‘í•  ê²ƒì´ë‹¤.

ê·¸ëŸ¬ë‚˜ í•¨ìˆ˜ `f`ê°€ ë‘ ê°œ ì´ìƒì˜ ì¸ìˆ˜ë¥¼ ê°€ì§„ ì½œë°±, ì˜ˆë¥¼ ë“¤ì–´ `callback(err, res1, res2, ...)`ì„ ë°›ì„ ë•ŒëŠ” ì–´ë–»ê²Œ í• ê¹Œ? ì´ëŸ¬í•œ ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ ë” ì§„í™”ëœ í—¬í¼ í•¨ìˆ˜, `promisify(f, true)`ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤. ì´ ê²½ìš°, í”„ë¼ë¯¸ìŠ¤ì˜ ê²°ê³¼ëŠ” ì½œë°±ì˜ ì„±ê³µ ì¼€ì´ìŠ¤ë¥¼ ë‹´ì€ ë°°ì—´ `[res1, res2, ...]`ì´ ëœë‹¤.

```js
function promisify(f, manyArgs = false) {
  return function (...args) {
    return new Promise((resolve, reject) => {
      function callback(err, ...results) { // fì— ì‚¬ìš©í•  ì»¤ìŠ¤í…€ ì½œë°±
        if (err) {
          reject(err);
        } else {
          // manyArgsê°€ êµ¬ì²´ì ìœ¼ë¡œ ëª…ì‹œë˜ë©´, ì½œë°±ì˜ ì„±ê³µ ì¼€ì´ìŠ¤ë¥¼ ë°°ì—´ë¡œ ë°˜í™˜
          resolve(manyArgs ? results : results[0]);
        }
      }

      args.push(callback);

      f.call(this, ...args);
    });
  };
};

// ì‚¬ìš©ë²•:
f = promisify(f, true);
f(...).then(arrayOfResults => ..., err => ...);
```

ì½œë°±ì´ ì—†ëŠ” í˜•íƒœë‚˜ ë‹¤ë¥¸ í˜•íƒœì˜ ì´ìƒ‰ì ì¸ ì½œë°±ë„ ìˆì„ ìˆ˜ ìˆë‹¤. ì´ëŸ° ê²½ìš°ì—ëŠ” í—¬í¼ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì§ì ‘ í”„ë¼ë¯¸ìŠ¤í™”í•˜ë©´ ëœë‹¤.

í”„ë¼ë¯¸ìŠ¤í™”ëŠ” `async/await`ì™€ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ ë” ì¢‹ì§€ë§Œ, ì½œë°±ì„ ì™„ì „íˆ ëŒ€ì²´í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤. í”„ë¼ë¯¸ìŠ¤ëŠ” ë‹¨ì¼ ê²°ê³¼ë§Œì„ ê°€ì§ˆ ìˆ˜ ìˆì§€ë§Œ, ì½œë°±ì€ ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.

ë”°ë¼ì„œ í”„ë¼ë¯¸ìŠ¤í™”ëŠ” ì½œë°±ì„ ë‹¨ í•œ ë²ˆë§Œ í˜¸ì¶œí•˜ëŠ” í•¨ìˆ˜ì—ë§Œ ì ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. í”„ë¼ë¯¸ìŠ¤í™”í•œ í•¨ìˆ˜ì˜ ì½œë°±ì„ ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œí•´ë„, ë‘ ë²ˆì§¸ í˜¸ì¶œ ì´í›„ëŠ” ë¬´ì‹œëœë‹¤.

### 11.7 ë§ˆì´í¬ë¡œíƒœìŠ¤í¬

## ë§ˆì´í¬ë¡œíƒœìŠ¤í¬

í”„ë¼ë¯¸ìŠ¤ í•¸ë“¤ëŸ¬ `.then`/`.catch`/`.finally`ëŠ” ë¹„ë™ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ëœë‹¤. í”„ë¼ë¯¸ìŠ¤ê°€ ì¦‰ì‹œ ì´í–‰ë˜ë”ë¼ë„ `.then`/`.catch`/`.finally` ì•„ë˜ì˜ ì½”ë“œëŠ” ë¨¼ì € ì‹¤í–‰ëœë‹¤.

**ì˜ˆì‹œ:**

```js
let promise = Promise.resolve();

promise.then(() => alert("í”„ë¼ë¯¸ìŠ¤ ì„±ê³µ!"));

alert("ì½”ë“œ ì¢…ë£Œ"); // ì–¼ëŸ¿ ì°½ì´ ë¨¼ì € ëœ¬ë‹¤.
```

ìœ„ ì˜ˆì‹œì—ì„œ 'ì½”ë“œ ì¢…ë£Œ'ê°€ ë¨¼ì € ì¶œë ¥ëœë‹¤. ì´ëŠ” ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ íì˜ íŠ¹ì„± ë•Œë¬¸ì´ë‹¤.

### ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ í

- ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ íëŠ” ë¨¼ì € ë“¤ì–´ì˜¨ ì‘ì—…ì„ ë¨¼ì € ì‹¤í–‰í•œë‹¤(FIFO).
- íì— ì‘ì—…ì´ ì—†ì„ ë•Œë§Œ íì— ìˆëŠ” ì‘ì—…ì´ ì‹¤í–‰ëœë‹¤.

í”„ë¼ë¯¸ìŠ¤ í•¸ë“¤ëŸ¬ëŠ” í•­ìƒ ë‚´ë¶€ íë¥¼ í†µê³¼í•˜ë©° ë¹„ë™ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ëœë‹¤.

**ìˆœì„œ ì¡°ì • ë°©ë²•:**

```js
Promise.resolve()
  .then(() => alert("í”„ë¼ë¯¸ìŠ¤ ì„±ê³µ!"))
  .then(() => alert("ì½”ë“œ ì¢…ë£Œ"));
```

ì´ì œ 'í”„ë¼ë¯¸ìŠ¤ ì„±ê³µ!'ì´ ë¨¼ì €, 'ì½”ë“œ ì¢…ë£Œ'ê°€ ë‚˜ì¤‘ì— ì¶œë ¥ëœë‹¤.

### ì²˜ë¦¬ë˜ì§€ ëª»í•œ ê±°ë¶€

í”„ë¼ë¯¸ìŠ¤ ì²´ì¸ì— `.catch`ë¥¼ ì¶”ê°€í•´ ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•˜ì§€ ì•Šìœ¼ë©´, ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ íê°€ ë¹„ì›Œì§„ í›„ `unhandledrejection` ì´ë²¤íŠ¸ê°€ ë°œìƒí•œë‹¤.

```js
let promise = Promise.reject(new Error("í”„ë¼ë¯¸ìŠ¤ ì‹¤íŒ¨!"));

// ì—ëŸ¬ê°€ ì²˜ë¦¬ë˜ì§€ ì•Šìœ¼ë©´ unhandledrejection ì´ë²¤íŠ¸ê°€ ë°œìƒí•œë‹¤.
window.addEventListener("unhandledrejection", (event) => alert(event.reason));
```

í”„ë¼ë¯¸ìŠ¤ ì—ëŸ¬ë¥¼ ë‚˜ì¤‘ì— ì²˜ë¦¬í•˜ë©´ `unhandledrejection` ì´ë²¤íŠ¸ê°€ ë¨¼ì € ë°œìƒí•˜ê³ , ë‚˜ì¤‘ì— `.catch`ê°€ íŠ¸ë¦¬ê±°ëœë‹¤.

### 14.6 async/await

#### ê¸°ë³¸ ì‚¬ìš©ë²•

- **`async`** í•¨ìˆ˜ëŠ” í•­ìƒ `Promise`ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. í•¨ìˆ˜ ë‚´ì—ì„œ `await` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **`await`** í‚¤ì›Œë“œëŠ” `Promise`ê°€ ì´í–‰ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ë©°, `Promise`ì˜ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

#### ì˜ˆì‹œ

```javascript
async function fetchData() {
  let response = await fetch("https://api.example.com/data");
  let data = await response.json();
  return data;
}

fetchData().then((data) => console.log(data));
```

- **`async`** í•¨ìˆ˜ëŠ” ë¹„ë™ê¸° ì‘ì—…ì„ ë™ê¸°ì ìœ¼ë¡œ ì‘ì„±í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.
- `await`ëŠ” **`Promise`ê°€ ì´í–‰ë  ë•Œê¹Œì§€ ì½”ë“œ ì‹¤í–‰ì„ ì ì‹œ ë©ˆì¶¥ë‹ˆë‹¤**.

### 14.7 ëª¨ë“ˆ ì†Œê°œ (Modules Intro)

#### ëª¨ë“ˆì´ë€?

- **ëª¨ë“ˆ**ì€ ì½”ë“œì˜ ë…ë¦½ì ì¸ ì¡°ê°ì„ ì˜ë¯¸í•˜ë©°, `import`ì™€ `export`ë¥¼ í†µí•´ ë‹¤ë¥¸ ëª¨ë“ˆê³¼ ìƒí˜¸ì‘ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### ëª¨ë“ˆ ì‚¬ìš©ë²•

- **`export`**: ëª¨ë“ˆì—ì„œ ë³€ìˆ˜, í•¨ìˆ˜, í´ë˜ìŠ¤ë¥¼ ì™¸ë¶€ë¡œ ë…¸ì¶œí•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.

```javascript
// lib.js
export const PI = 3.14;
export function square(x) {
  return x * x;
}
```

- **`import`**: ë‹¤ë¥¸ ëª¨ë“ˆì—ì„œ ë‚´ë³´ë‚¸ í•­ëª©ì„ ê°€ì ¸ì˜¬ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.

```javascript
// main.js
import { PI, square } from "./lib.js";

console.log(PI); // 3.14
console.log(square(5)); // 25
```

### 14.8 `import`/`export`

#### `export`

- **`export`**ëŠ” ëª¨ë“ˆì˜ ë³€ìˆ˜ë‚˜ í•¨ìˆ˜ë¥¼ ì™¸ë¶€ì— ì œê³µí•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤.

#### `import`

- **`import`**ëŠ” ë‹¤ë¥¸ ëª¨ë“ˆì—ì„œ ë‚´ë³´ë‚¸ ë³€ìˆ˜ë‚˜ í•¨ìˆ˜ë¥¼ ê°€ì ¸ì˜¬ ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤.

#### ì˜ˆì‹œ

```javascript
// lib.js
export const PI = 3.14;
export function add(x, y) {
  return x + y;
}

// app.js
import { PI, add } from "./lib.js";

console.log(PI); // 3.14
console.log(add(2, 3)); // 5
```

### 14.9 ë™ì  `import` (Dynamic Imports)

#### ê°œìš”

- **ë™ì  `import`**ëŠ” ì½”ë“œ ì‹¤í–‰ ì¤‘ì— ëª¨ë“ˆì„ ë™ì ìœ¼ë¡œ ë¡œë“œí•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤. ì´ëŠ” í•„ìš”í•  ë•Œë§Œ ëª¨ë“ˆì„ ë¡œë“œí•˜ì—¬ ì´ˆê¸° ë¡œë”© ì‹œê°„ì„ ì¤„ì´ëŠ” ë° ìœ ìš©í•©ë‹ˆë‹¤.

#### ì‚¬ìš©ë²•

```javascript
// app.js
async function loadModule() {
  const module = await import("./module.js");
  module.someFunction();
}

loadModule();
```

### 14.10 í”„ë¡ì‹œ (Proxy)

#### ê°œìš”

- **í”„ë¡ì‹œ**ëŠ” ê°ì²´ì˜ ë™ì‘ì„ ê°€ë¡œì±„ê³  ìˆ˜ì •í•  ìˆ˜ ìˆëŠ” ë©”ì»¤ë‹ˆì¦˜ì…ë‹ˆë‹¤. ê°ì²´ì˜ ë™ì‘ì„ ê°€ë¡œì±„ì–´ ë‹¤ì–‘í•œ ë™ì‘ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### ì‚¬ìš©ë²•

```javascript
const handler = {
  get(target, prop, receiver) {
    return prop in target ? target[prop] : `Property ${prop} not found`;
  },
};

const proxy = new Proxy({}, handler);

proxy.foo = "bar";
console.log(proxy.foo); // bar
console.log(proxy.baz); // Property baz not found
```

### 14.11 `eval` í•¨ìˆ˜

#### ê°œìš”

- **`eval`** í•¨ìˆ˜ëŠ” ë¬¸ìì—´ë¡œ ì „ë‹¬ëœ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. ë³´ì•ˆìƒ ìœ„í—˜í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì‚¬ìš©ì— ì£¼ì˜í•´ì•¼ í•©ë‹ˆë‹¤.

#### ì‚¬ìš©ë²•

```javascript
const code = 'console.log("Hello, world!");';
eval(code); // Hello, world!
```

### 14.12 ì»¤ë§ê³¼ ë¶€ë¶„ í•¨ìˆ˜ ì ìš© (Currying and Partial Application)

#### ì»¤ë§ (Currying)

- **ì»¤ë§**ì€ í•¨ìˆ˜ê°€ ì—¬ëŸ¬ ê°œì˜ ì¸ìë¥¼ ë°›ëŠ” ëŒ€ì‹ , í•˜ë‚˜ì˜ ì¸ìë¥¼ ë°›ëŠ” í•¨ìˆ˜ë“¤ì„ ë°˜í™˜í•˜ëŠ” ê¸°ìˆ ì…ë‹ˆë‹¤.

#### ì˜ˆì‹œ

```javascript
function multiply(a) {
  return function (b) {
    return a * b;
  };
}

const double = multiply(2);
console.log(double(5)); // 10
```

#### ë¶€ë¶„ í•¨ìˆ˜ ì ìš© (Partial Application)

- **ë¶€ë¶„ í•¨ìˆ˜ ì ìš©**ì€ í•¨ìˆ˜ì˜ ì¼ë¶€ ì¸ìë¥¼ ê³ ì •í•˜ì—¬ ìƒˆë¡œìš´ í•¨ìˆ˜ë¥¼ ìƒì„±í•˜ëŠ” ê¸°ë²•ì…ë‹ˆë‹¤.

#### ì˜ˆì‹œ

```javascript
function greet(greeting, name) {
  return `${greeting}, ${name}!`;
}

const greetHello = greet.bind(null, "Hello");
console.log(greetHello("John")); // Hello, John!
```

# ğŸ§ ì§ˆë¬¸
